<svg xmlns="http://www.w3.org/2000/svg" width="960" height="520" viewBox="0 0 960 520">
  <style>
    .title { font: bold 26px 'Segoe UI', sans-serif; fill: #1b4b82; }
    .subtitle { font: 18px 'Segoe UI', sans-serif; fill: #1b4b82; }
    .label { font: 16px 'Segoe UI', sans-serif; fill: #0f172a; }
    .note { font: 13px 'Segoe UI', sans-serif; fill: #475569; }
    .box { fill: #e2e8f0; stroke: #1e293b; stroke-width: 2; rx: 10; ry: 10; }
    .group { fill: #f1f5f9; stroke: #64748b; stroke-width: 2; rx: 16; ry: 16; }
    .arrow { marker-end: url(#arrowhead); stroke: #1e293b; stroke-width: 2.5; fill: none; }
  </style>
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#1e293b" />
    </marker>
  </defs>
  <rect x="20" y="20" width="920" height="480" fill="#ffffff" stroke="#cbd5f5" stroke-width="2" rx="24" ry="24" />
  <text x="60" y="70" class="title">Industrial IoT Data Pipeline – Architecture Overview</text>
  <text x="60" y="100" class="subtitle">Dual HTTP/MQTT ingestion feeding InfluxDB + Grafana observability stack</text>

  <rect x="60" y="140" width="220" height="130" class="group" />
  <text x="90" y="175" class="label">Edge IO-Link Gateways</text>
  <text x="85" y="205" class="note">• REST endpoints `/gateway/events`</text>
  <text x="85" y="230" class="note">• Identification metadata</text>
  <text x="85" y="255" class="note">• MQTT telemetry topics</text>

  <rect x="320" y="120" width="260" height="170" class="group" />
  <text x="360" y="155" class="label">Node-RED Runtime (Edge)</text>
  <rect x="340" y="180" width="220" height="45" class="box" />
  <text x="355" y="210" class="label">HTTP Event Poll Pipeline</text>
  <rect x="340" y="235" width="220" height="45" class="box" />
  <text x="355" y="265" class="label">MQTT Ingest Pipeline</text>

  <rect x="320" y="320" width="260" height="140" class="group" />
  <text x="360" y="355" class="label">Runtime Context &amp; Logging</text>
  <rect x="340" y="380" width="220" height="45" class="box" />
  <text x="355" y="410" class="label">Config Loaders (masterMap, errorCodes)</text>
  <rect x="340" y="435" width="220" height="45" class="box" />
  <text x="355" y="465" class="label">Structured File Logs &amp; Reset</text>

  <rect x="620" y="180" width="260" height="130" class="group" />
  <text x="660" y="215" class="label">InfluxDB 2.x Buckets</text>
  <text x="645" y="245" class="note">• A01 (process &amp; diagnostics)</text>
  <text x="645" y="270" class="note">• iot_events (event telemetry)</text>
  <text x="645" y="295" class="note">• gateway_identification</text>

  <rect x="620" y="340" width="260" height="100" class="group" />
  <text x="680" y="375" class="label">Grafana Dashboards</text>
  <text x="645" y="405" class="note">Visualize metrics, events, inventory</text>

  <path class="arrow" d="M280 205 H320" />
  <path class="arrow" d="M280 245 H320" />
  <path class="arrow" d="M450 290 V340" />
  <path class="arrow" d="M580 210 H620" />
  <path class="arrow" d="M580 255 H620" />
  <path class="arrow" d="M580 400 H620" />
  <path class="arrow" d="M750 310 V340" />
  <text x="300" y="215" class="note">HTTP JSON</text>
  <text x="300" y="250" class="note">MQTT frames</text>
  <text x="585" y="235" class="note">Normalized measurements</text>
  <text x="585" y="420" class="note">Flux queries</text>
</svg>
